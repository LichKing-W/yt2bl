# YouTube订阅监控 - crontab 定时任务示例
#
# 使用方法：
# 1. 复制此文件并修改路径：cp scripts/crontab.example /tmp/my_crontab
# 2. 安装 crontab：crontab /tmp/my_crontab
# 3. 查看已安装的 crontab：crontab -l
# 4. 编辑 crontab：crontab -e

# ========== 重要：代理设置 ==========
# 如果你使用代理访问 YouTube，需要设置以下环境变量
# 从 .env.cron 文件中读取代理配置
# 方法1：直接在这里设置（简单）
ALL_PROXY=http://127.0.0.1:7897
HTTP_PROXY=http://127.0.0.1:7897
HTTPS_PROXY=http://127.0.0.1:7897
NO_PROXY=localhost,127.0.0.1

# 方法2：从 .env.cron 文件加载（需要 bash shell）
# set -a; . ./env.cron; set +a

# 如果不使用代理，注释掉上面的行

# ========== 基本环境变量 ==========
HOME=/home/bk/projects/yt2bl
PATH=/home/bk/projects/yt2bl/.venv/bin:/usr/local/bin:/usr/bin:/bin

# ========== 定时任务 ==========
# 每小时运行一次（整点）
0 * * * * cd /home/bk/projects/yt2bl && /home/bk/projects/yt2bl/.venv/bin/python -m src.subscription_monitor >> logs/cron.log 2>&1

# 每30分钟运行一次
#*/30 * * * * cd /home/bk/projects/yt2bl && /home/bk/projects/yt2bl/.venv/bin/python -m src.subscription_monitor >> logs/cron.log 2>&1

# 每2小时运行一次
#0 */2 * * * cd /home/bk/projects/yt2bl && /home/bk/projects/yt2bl/.venv/bin/python -m src.subscription_monitor >> logs/cron.log 2>&1

# 每天凌晨2点运行一次
#0 2 * * * cd /home/bk/projects/yt2bl && /home/bk/projects/yt2bl/.venv/bin/python -m src.subscription_monitor >> logs/cron.log 2>&1

# 测试用：每分钟运行一次（仅用于测试，不建议长期使用）
#* * * * * cd /home/bk/projects/yt2bl && /home/bk/projects/yt2bl/.venv/bin/python -m src.subscription_monitor >> logs/cron.log 2>&1
